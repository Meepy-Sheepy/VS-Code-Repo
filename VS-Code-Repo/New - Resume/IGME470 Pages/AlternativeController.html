<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 2</title>
    <link rel="stylesheet" href="../css/blogStyles.css">
</head>

<body>
    <header>
        <h1>Project 2: Alternative Controller</h1>
        <p class="date">11/16/25</p>
    </header>

    <div class="container">
        <!-- INTRO SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>Don't Be Suspicious, Don't Be Suspicious</h2>
                <p>
                    Welcome! Today, I'm going to go through the process of Project 2: Alternative Controller.
                    this project is about creating an <i>alternative</i> controller to create interaction
                    between the physical and digital world. For my project, I wanted to make a lock picking
                    similar, where you, as a burglar, are trying to pick a lock.
                </p>
                <p>
                    Originally, my circuitry was going to use a 360 potentiometer (technically named a rotary encoder)
                    for the rotation of the lock and a button to confirm the number
                    on the combination lock, but Nick, my professor, had offered to give me a rotary encoder from his
                    office which combined both the button aspect and the rotation! It was quite convenient.
                    Secondly, I didn't have any feedback for the player to know which number was the correct one,
                    so I used a LED as an indicator. Overall, not too shabby of a circuit. The rotary encoder was
                    the weirdest part.
                </p>
            </div>
            <div class="media">
                <img src="../images/IGME 470/AlternativeController/Burglar.png" alt="Burglar">
            </div>
        </div>

        <!-- BODY SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>Crime Are Kinda Hard To Commit</h2>
                <p>
                    So, the first thing I needed to do was find out what part Nick gave me. He didn't know
                    from the top of his head what type of part it is, so I took a picture of the
                    packaging and found the part on Amazon. In the titling, it was called
                    a rotary encoder. I didn't know what that was so I looked that up in the
                    context of Arduinos and I found this arduinogetstarted
                    website and the stars aligned because as I scrolled down
                    to compare the part on this website to mine, <i>it was the <b>exact</b> same one.</i>
                    My jaw dropped. I could not believe the part Nick gave me was somehow the
                    one this tutorial was using.
                </p>
                <p>
                    When I used the potentiometer that comes with the starter kit, that potentiometer
                    outputs analog voltage, while this one outputs digital pulses. This was a shock
                    because I assumed it would be analog as well but a rotary encoder can do more things:
                </p>

                <ol style="font-size: 20px;">
                    <li>It can spin in a full circle without stopping.</li>
                    <li>Can be used to figure out how much the knob has moved, not exactly where it is.</li>
                </ol>

                <p>
                    The encoder has a couple of new pins which are not very clear at first, but here's
                    what they are and what they mean:
                </p>

                <ol style="font-size: 20px;">
                    <li>CLK Pin - Main pulse that tell us how much rotation has occured. Whenever you
                        turn the knob by 1 detent (click) in either direction, the CLK pin outputs
                        a signal that completes a full cycle (LOW -> HIGH -> LOW).
                    </li>
                    <li>DT Pin - Acts like the CLK pin but it outputs a signal which lags behind the CLK
                        signal by 90 degrees. Helps figure out the direction of rotation (CW/CCW).
                    </li>
                    <li>SW Pin - The output from the pushbutton inside the encoder. It's normally open.
                        The pin will be HIGH when it's not pressed, and LOW when pressed.
                    </li>
                    <li>VCC Pin - Needs to be connected to VCC (between 3.3 to 5V).</li>
                    <li>GND Pin - Needs to be connected to GND.</li>
                </ol>

                <p>With that, I think it's time to get into the code portion of this assignment!</p>

            </div>
            <div class="media">
                <img src="../images/IGME 470/AlternativeController/Final Result.jpg"
                    alt="Alternative Controller final result">
                <img src="../videos/IGME 470/AlternativeController/Finished.gif" alt="AlternativeController showcase">

            </div>
        </div>

        <!-- CODE SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>You Spin Me Right Round (Arduino)</h2>
                <p>
                    Once again, the Arduino gods has blessed me with code on how to use the
                    rotary encoder. To be able to use the button (SW pin) part of the encoder,
                    we have to install and import a library from the Arduino IDE.
                    This library is called ezButton. It is incredibly easy to use and only
                    adds a couple lines. We call the ezButton loop function and make
                    an if statement using the built-in function--isPressed()--to detect when
                    the button is pressed to print out "UNLOCK" to the serial console.
                </p>

                <p>
                    There are a couple of variables we need to talk about:
                </p>

                <ol style="font-size: 20px;">
                    <li>CPR - Counts Per Revolution. How many clicks it takes to do a full rotation. Higher number = more
                        granular rotation.</li>
                    <li>Counter - Tracks the user's knob turns.</li>
                    <li>Angle - Angle of rotation the knob is in.</li>
                </ol>

                <p>
                    The big chunk of the loop function is the logic for knob rotation.
                    The first if statement only returns true when a pulse has occured, and
                    if the knob is high. The next part of the code detects if the knob is turned
                    in the CW or CCW direction. Based on the direction, the counter is
                    incremented or decremented. If you look hard enough, you'll find that the counter
                    is the opposite of what it should be. When you turn CW, the counter is decremented,
                    and vice versa. This is happening because in Unity, the rotation opposes the rotation
                    of the encoder, so I changed the math here rather than in Unity to make
                    it easier on myself.
                </p>
                <p>
                    The next lines deal with the counter and CPR. We want to keep the rotation
                    within 0-360 degrees and those 2 if statements detect if the counter is
                    above the CPR max or below 0. The angle is calcalated by dividing 360 degrees
                    by the how many rotations it takes to make a full rotation (CPR),
                    multiplied by the amount of rotations the user has made (counter).
                </p>

                <p>
                    To make the LED work the way I want to, I detect if there is anything in
                    the serial console and read in the data. Once I do that, I can easily
                    turn on and off the LED based on which data is being inputted to the console.
                </p>
            </div>
            <div class="media">
                <img src="../images/IGME 470/AlternativeController/AlternativeController Code.PNG"
                    alt="AlternativeController Arduino code">
            </div>
        </div>

        <!-- CODE SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>You Spin Me Right Round (Unity)</h2>
                <p>
                    The code in Unity is very similar to Participation: Fun With Unity assignment. It was a matter of
                    coincidence that I wanted to use a potentiometer/encoder for this project.
                    It made things easier when connecting the Arduino to Unity. The overarching idea behind
                    the code is that at the start of the game, there is a random angle. The player can
                    rotate the lock and find the angle. Once they do, the LED turns on, and if they click
                    the encoder, their score will increase, the LED will turn off, and there is a new
                    random angle.
                </p>
                <p>
                    In the Arduino, I'm sending a couple of lines to the serial console such as:
                </p>

                <ol style="font-size: 20px;">
                    <li>ANGLE: angle</li>
                    <li>DIRECTION: CW/CCW (Not in use, in the code to potentially be used for Project 4)</li>
                    <li>UNLOCK</li>
                </ol>

                <p>
                    These print statements can be communicated to other programs if they are able to have serial
                    communication. So in Unity, I detect what string it's currently
                    reading starts with: ANGLE, DIRECTION, UNLOCK.
                    If it's ANGLE, I split the string at the colon (:), and use the last part of the string to use for
                    rotating the lock, the actual angle value. DIRECTION is not
                    used right now as it is a stretch goal for Project 4.
                    I'm thinking about using the direction to lock the player to a CW -> CCW -> CW
                    formation, like how you unlock a combination lock normally. In the current
                    iteration, you can go either direction to find the number. If it's UNLOCK,
                    that means the player can "unlock" the lock.
                </p>
                <p>
                    Finally, there is the IsInRange function, which returns a boolean. This function finds the shortest
                    distance between the random angle and the angle the player is currently on.
                    There is a tolerance value which helps be more generous on if the player is
                    on the random angle or not.
                </p>

            </div>
            <div class="media">
                <img src="../images/IGME 470/AlternativeController/AlternativeControllerUnity Code.PNG"
                    alt="AlternativeController Unity code">
            </div>
        </div>

        <!-- TINKERCAD I SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>Tinkercad I</h2>
            </div>
            <div class="media-row">
                <img src="../images/IGME 470/AlternativeController/Visual Schematic.png"
                    alt="AlternativeController visual schematic">
                <img src="../images/IGME 470/AlternativeController/Rotary Encoder Schematic.png"
                    alt="Rotary Encoder schematic view">
            </div>
            <p><i>Note: Replace the potentiometer with a rotary encoder and keep the LED.</i></p>
        </div>

        <!-- TINKERCAD II SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>Tinkercad II</h2>
            </div>
            <div class="media-row">
                <img src="../images/IGME 470/AlternativeController/Schematic View.png"
                    alt="AlternativeController schematic view">
                <img src="../images/IGME 470/AlternativeController/CSV.png" alt="AlternativeController CSV">
            </div>
        </div>

        <!-- REFERENCE SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>References</h2>
                <ol style="font-size: 20px;">
                    <li><a href="https://arduinogetstarted.com/tutorials/arduino-rotary-encoder">Rotary Encoder
                            ArduinoGetStarted</a></li>
                    <li><a href="https://a.co/d/gT4SrAa">Rotary Encoder
                            Amazon</a></li>
                </ol>
            </div>
        </div>

        <!-- Post Mortum SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>Post Mortum</h2>
            </div>
            <div class="media-row">
                <iframe width="800" height="450" src=""></iframe>
            </div>
        </div>

        <!-- CONCLUSION SECTION -->
        <div class="blog-post">
            <div class="text">
                <h2>Conclusion</h2>
                <p>
                    This was a very fun project! I felt so comfortable tinkering with new parts
                    and I wasn't afraid of messing things up. It's still so cool that I'm
                    taking random parts to create an experience.
                </p>
                <p>On To Project 3: Art Meets Engineering</p>
                <a href="../IGME470 Pages/IGME470.html" class="back">‚Üê Back to 470 Home Page</a>
            </div>
        </div>
    </div>
</body>

</html>